{% extends 'ProfilUtilisateur/base.html' %}

{% block title %}Connexion{% endblock %}

{% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <!-- Carte de connexion -->
      <div class="card shadow rounded">
        <div class="card-header bg-primary text-white text-center">
          <h2>Bienvenue</h2>
          <p class="mb-0">Connectez-vous à votre espace personnel</p>
        </div>
        <div class="card-body">
          {% if request.GET.inscription == 'ok' %}
            <div class="alert alert-success alert-dismissible fade show" role="alert">
              Inscription réussie ! Connectez-vous maintenant.
              <button type="button" class="close" data-dismiss="alert" aria-label="Fermer">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
          {% endif %}
          <form method="post">
            {% csrf_token %}
            <!-- Champ utilisateur -->
            <div class="form-group">
              <label for="username" class="text-dark">Nom d'utilisateur :</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text bg-primary text-white">
                    <i class="fas fa-user"></i>
                  </span>
                </div>
                <input type="text" name="username" id="username" class="form-control" placeholder="Entrez votre nom d'utilisateur" required>
              </div>
            </div>
            <!-- Champ mot de passe -->
            <div class="form-group">
              <label for="password" class="text-dark">Mot de passe :</label>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text bg-primary text-white">
                    <i class="fas fa-lock"></i>
                  </span>
                </div>
                <input type="password" name="password" id="password" class="form-control" placeholder="Entrez votre mot de passe" required>
                <div class="input-group-append">
                  <span class="input-group-text" onclick="togglePassword('password', this)" style="cursor:pointer;">
                    <i class="fas fa-eye"></i>
                  </span>
                </div>
              </div>
            </div>
            <button type="submit" class="btn btn-primary btn-block mt-3">Se connecter</button>
          </form>
        </div>
        <div class="card-footer bg-light text-center">
          <p class="mb-1">Vous n'avez pas de compte ? <a href="{% url 'register' %}" class="text-primary font-weight-bold">Inscrivez-vous ici</a></p>
          <p class="mb-0">Mot de passe oublié ? <a href="#" class="text-danger font-weight-bold">Réinitialisez-le</a></p>
          {% if user.is_authenticated and user.is_superuser %}
            <a href="/admin/" class="btn btn-dark mt-2">Accéder à l'espace admin</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
<script>
function togglePassword(fieldId, el) {
  var input = document.getElementById(fieldId);
  var icon = el.querySelector('i');
  if (input.type === 'password') {
    input.type = 'text';
    icon.classList.remove('fa-eye');
    icon.classList.add('fa-eye-slash');
  } else {
    input.type = 'password';
    icon.classList.remove('fa-eye-slash');
    icon.classList.add('fa-eye');
  }
}
</script>
<!-- FontAwesome CDN for eye icon -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
  @media (max-width: 768px) {
    .btn-lg, .btn-block, .btn, button {
      font-size: 1.1rem;
      padding: 0.75rem 1rem;
      width: 100%;
      margin-bottom: 0.5rem;
    }
    .card h2, .card h3, h2, h3 {
      font-size: 1.3rem;
    }
    .card p, .btn, p, label, input, select, textarea {
      font-size: 1rem;
    }
    .d-flex.gap-3, .d-flex.gap-2, .row, .form-row {
      flex-direction: column !important;
      gap: 0.5rem !important;
    }
    .container, .card, .form-group, .form-control {
      padding-left: 0.5rem !important;
      padding-right: 0.5rem !important;
    }
  }
</style>
{% endblock %}
